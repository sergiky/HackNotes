
# What is an SQUID Proxy?

This is not a "vulnerability", but we can find with this.

Is a web-server proxy-cache with GPL license, their object is work like a proxy and stores requested Internet Objects, like FTP server or data in a web.

Imagine that the server do a petition, squid proxy keep them and if the petition is request again, the time of the response is lower because they are saved.

---

# Exploiting

In this case we are going to play with [SickOS 1.1](../../CTF/VulnHub/SickOS%201.1.md) from Vulnhub to explain this

---

## Script to discover ports in python

In this case we are going to discover the fifty port more common because all ports are very slowly

````python
#!/usr/bin/python3

import sys, signal, requests

# Global variables

main_url = "http://127.0.0.1"
squid_proxy = {'http': 'http://192.168.1.38:3128'}

# Ctrl_c

def def_handler(sig, frame):
    print("\n\n[!] Saliendo...\n")
    sys.exit(1)


signal.signal(signal.SIGINT, def_handler)

def portDiscovery():
    common_tcp_ports = {20, 21, 22, 23, 25, 53, 80, 110, 115, 119, 135, 137, 138, 139, 143, 161, 194, 389, 443, 445,
                   465, 514, 515, 587, 636, 993, 995, 1080, 1433, 1434, 1521, 1723, 2049, 2082, 2083, 2086, 2087,
                   2095, 2096, 3306, 3389, 5432, 5500, 5800, 5900, 6000, 6660, 6661, 6662, 6663, 6664, 6665, 6666, 6667, 6668, 6669}
    
    for tcp_port in common_tcp_ports:
        
        r = requests.get(main_url + ':' + str(tcp_port), proxies=squid_proxy)

        if r.status_code != 503:

            print("[+] Open Port: " + str(tcp_port))

if __name__ == '__main__':
    portDiscovery()

````


---

# Automatization tool

If you want to use other tool you can use [sponse](https://github.com/aancw/spose) that is a Open Port Scanning using Squid Proxy

---

# Tags

#vulnerabilty #squidproxies 